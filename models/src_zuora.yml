version: 2
sources:
  - name: zuora
    database: "{% if target.type != 'spark'%}{{ var ('zuora_database', target.database) }}{% endif %}"    
    schema: "{{ var('zuora_schema', 'zuora')}}"
  
    loader: fivetran
    loaded_at_field: _fivetran_synced

    freshness:
      warn_after: { count: 72, period: hour }
      error_after: { count: 168, period: hour }

    tables:
      - name: account
        identifier: "{{ var('zuora_account_identifier', 'account')}}"
        description: fill in
        columns:
          - name: account_id
          - name: account_number
          - name: auto_pay
          - name: bill_to_contact_id
          - name: created_date
          - name: created_by_id
          - name: currency
          - name: default_payment_method_id
          - name: last_invoice_date
          - name: invoice_template_id
          - name: mrr
          - name: account_name
          - name: parent_account_id
          - name: payment_term
          - name: sold_to_contact_id
          - name: account_status
          - name: total_invoice_balance

      - name: contact
        identifier: "{{ var('zuora_contact_identifier', 'contact')}}"
        description: fill in
        columns:
          - name: contact_id 
          - name: account_id
          - name: address_1
          - name: address_2
          - name: city
          - name: created_date
          - name: country
          - name: first_name
          - name: last_name
          - name: postal_code
          - name: state
          - name: updated_date
          - name: work_email
    
      - name: product
        identifier: "{{ var('zuora_product_identifier', 'product')}}"
        description: fill in 
        columns:
          - name: id 
          - name: allow_feature_changes
          - name: created_by_id 
          - name: created_date
          - name: category
          - name: description 
          - name: effective_end_date
          - name: effective_start_date
          - name: name
          - name: sku
          - name: updated_by_id
          - name: updated_date 